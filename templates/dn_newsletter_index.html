<div class="dns_by_date">
	{% regroup dns by death_notice_created|date:'l, F j, Y' as dn_by_day %}

	{% for dn in dn_by_day %}
	<h1>{{ dn.grouper }}</h1>

	<div class="dn">
	{% for dn_obj in dn.list|dictsort:'last_name' %}
		<a href="{% url dn_detail dn_obj.id %}" target="_blank"><h2>{{ dn_obj.first_name }} {{ dn_obj.last_name }}</h2></a>
		<p>{{ dn_obj.first_name }} {% if dn_obj.middle_name %}{{ dn_obj.middle_name }} {% endif %}{% if dn_obj.nickname %}“{{ dn_obj.nickname}}” {% endif %}{{ dn_obj.last_name }}, {{ dn_obj.age_unit_combo }}, of {{ dn_obj.city_of_residence }}{% if dn_obj.formerly_of %}, formerly of {{ dn_obj.formerly_of }}{% endif %}, died {{ dn_obj.death_date|date:"N j" }}.{% if dn_obj.service %} A {{ dn_obj.service.get_service_display }} will be {% if dn_obj.service.service_end_date_time %}from {{ dn_obj.service.service_date_time|date:"P" }} to {{ dn_obj.service.service_end_date_time|date:"P l, N j," }}{% else %}at {{ dn_obj.service.service_date_time|date:"P l, N j," }}{% endif %} at the {{ dn_obj.service.service_location|safe }}{% if dn_obj.service.service_city %} in {{ dn_obj.service.service_city }}{% endif %}.{% endif %}{% if dn_obj.deathnoticeotherservices%} A {{ dn_obj.deathnoticeotherservices.description }} will be at {{ dn_obj.deathnoticeotherservices.other_services_date_time|date:"P l, N j," }} at {{ dn_obj.deathnoticeotherservices.other_services_location }}.{% endif %}{% if dn_obj.no_service_planned %} No service is planned.{% endif %}{% if dn_obj.remembrances %} Remembrances to {{ dn_obj.remembrances }}.{% endif %} Arrangements by {{ dn_obj.funeral_home.fh_user2.full_name|safe }}{% if dn_obj.funeral_home.fh_user2.city %} in {{ dn_obj.funeral_home.fh_user2.city }}{% endif %}.</p>

		{# <p>{{ dn.funeral_home.fh_user2.full_name }}</p> #}
	{% endfor %}
	</div> <!-- /.dn -->
	{% endfor %}
	
</div> <!-- /.dns_by_date -->
